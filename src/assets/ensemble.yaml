version: "ensembleV1"

allocations:
  attentionbroker:
    executor: docker
    resources:
      cpu:
        cores: 1
      gpus: []
      ram:
        size: 1
      disk:
        size: 1
    execution:
      type: docker
      image: trueagi/das:attention-broker-poc
      cmd: ["37007"]
    dnsname: attentionbroker

  queryagent:
    executor: docker
    resources:
      cpu:
        cores: 1
      ram:
        size: 1
      disk:
        size: 1
    execution:
      type: docker
      image: trueagi/das:query-agent-poc
      cmd: ["31700"]
      environment:
        - DAS_REDIS_HOSTNAME=104.238.183.115
        - DAS_REDIS_PORT=28100
        - DAS_USE_REDIS_CLUSTER=false
        - DAS_MONGODB_HOSTNAME=104.238.183.115
        - DAS_MONGODB_PORT=29100
        - DAS_MONGODB_USERNAME=admin
        - DAS_MONGODB_PASSWORD=admin

    dnsname: queryagent

  linkcreationagent:
    executor: docker
    resources:
      cpu:
        cores: 1
      gpus: []
      ram:
        size: 5
      disk:
        size: 10
    execution:
      type: docker
      image: trueagi/das:link-creation-agent-poc
      cmd: ["OPTIONS=\"--type server --config_file agent.cnf\""]
    dnsname: linkcreationagent

  linkcreationclient:
    executor: docker
    resources:
      cpu:
        cores: 1
      gpus: []
      ram:
        size: 1
      disk:
        size: 1
    execution:
      type: docker
      image: trueagi/das:link-creation-client-poc
      cmd: ["OPTIONS=\"localhost:1010 localhost:9080 LINK_TEMPLATE Expression 3 NODE Symbol Similarity VARIABLE V1 VARIABLE V2 LINK_CREATE Similarity 2 1 VARIABLE V1 VARIABLE V2 CUSTOM_FIELD truth_value 2 CUSTOM_FIELD mean 2 count 10 avg 0.9 confidence 0.9 10 0 test false\""]
    dnsname: linkcreationclient

nodes:
  node1:
    allocations:
      - attentionbroker
      - queryagent
      - linkcreationagent
      - linkcreationclient
    peer: ${PEER_ID}
